## 7 数据词典

### 7.1 数据流定义表
<center>数据流定义表(顶层）</center>

|编号|数据流名|来源|去向|说明|
|:-|:-|:-|:-|:-|
|L1|账户指令|普通账户|账户系统|用户可以注册，登陆，设置信息，充值，提现
|L2|指令执行结果|账户系统|普通账户|返回用户执行指令结果
|L3|交易指令|普通账户|中央交易系统|用户按市价买入，卖出股票，或限价设置买入，卖出价格
|L4|指令执行结果|中央交易系统|普通账户|返回交易指令执行结果|
|L5|管理指令|管理员账户|账户系统|冻结，恢复，删除用户账户|
|L6|指令执行结果|账户系统|管理员账号|管理指令执行结果|
|L7|股票查询指令|信息发布系统|账户系统|查询股票名称，代号，实时价格，月K，年K等|
|L8|执行执行结果|账户系统|信息发布系统|返回查询内容|




<center>数据流定义表(中层）</center>

|编号|数据流名|来源|去向|组成|说明|
|:-|:-|:-|:-|:-|:-|
|L9|登陆|普通账户|账户系统|E2+E3|用户登陆
|L10|查询股票|普通账户或信息发布系统|账户系统|E8或E9|根据股票代号或名称查询信息
|L11|返回查询结果|账户系统|信息发布系统或账户|E8-E21|返回股票信息
|L12|买入、卖出股票|账户|账户系统|E1+E8+E22|用户对股票进行买入卖出操作
|L13|返回交易结果|账户系统|账户|E1+E6+E23+E24+E25|返回交易后的结果

### 7.2 数据元素定义表
|编号|数据元素名|类型|值域|说明|
|:-|:-|:-|:-|:-|
|E1|账户序列号|数字|0-100000|账户唯一编号
|E2|帐户名|字符串|[a-z,A-Z,0-9]|6-15位
|E3|账户密码|字符串|[a-z,A-Z,0-9]|6-15位
|E4|账户身份证号|字符串|[0-9,X]|18位
|E5|账户手机号|数字|[0-9]|11位
|E6|账户余额（元，角，分）|数字|[0-∞]|整数
|E7|账户冻结资金（元，角，分）|数字|[0-∞]|整数
|E8|股票代号|字符串|[0-9,A-Z]|6位
|E9|股票名称|字符串|[0-9,A-Z,汉字]|4位
|E10|股票实时价格（元，角，分）|数字|[0-∞]|整数
|E11|股票今日开盘价（元，角，分）|数字|[0-∞]|整数
|E12|股票昨日收盘价（元，角，分）|数字|[0-∞]|整数
|E13|股票日均价（元，角，分）|数字|[0-∞]|整数
|E14|股票今日最低价（元，角，分）|数字|[0-∞]|整数
|E15|股票今日最高价（元，角，分）|数字|[0-∞]|整数
|E16|股票周最低价（元，角，分）|数字|[0-∞]|整数
|E17|股票周最高价（元，角，分）|数字|[0-∞]|整数
|E18|股票月最低价（元，角，分）|数字|[0-∞]|整数
|E19|股票月最高价（元，角，分）|数字|[0-∞]|整数
|E20|股票年最低价（元，角，分）|数字|[0-∞]|整数
|E21|股票年最高价（元，角，分）|数字|[0-∞]|整数
|E22|股票交易数量|数字|[0-∞]|整数
|E23|交易结果|布尔|true false|交易成功与否
|E24|交易时间|日期|ISO标准|时间
|E25|当前持股数|数字|[0-∞]|用户对某股持股数

### 7.3 外部项定义表

<center>外部项定义表</center>

|编号|外部项名|输入数据流|输出数据流|说明|
|:-|:-|:-|:-|:-|
|W1|信息发布系统|L7|L8|查询股票信息
|W2|客户端|L1|L2|用户登陆、注册、修改信息
|W3|中央交易系统|L3|L4|用户交易指令

### 7.4 数据精度表

<center>数据精度表</center>


|数据|类型|精度要求|说明|示例|
|:-|:-|:-|:-|:-|
|帐户名|字符串|6-15位|至少6位，区分大小写|iamverydark
|账户密码|字符串|6-15位|至少6位，区分大小写|a1b2c3d5e5
|股票代号|字符串|6位|汉字大写字母数字都可以|000122
|股票名称|字符串|4位|汉字 大写字母|长江实业
|各种价格|数字|都是整数，元角分分开储存|浮点数精度原因使用整数|4元2角2分
|持股数|数字|整数|规定不可拆分小数股|14

## 8 数据词典验收标准

账户系统负责整个系统的数据库部分，包括用户/管理员账户信息的储存以及股票信息的储存，生成相关API由其他子系统调用。

账户系统将实现以下功能，验收时以此为标准。
### 8.1 功能需求

#### 1. 账户注册、登陆、修改信息

账户系统提供注册、登陆的API，由前端发送相关请求调用，登陆时将有账户系统去身份验证服务器校验用户身份。

#### 2. 股票信息查询、修改

账户系统提供根据股票代码或者名称查询信息的API，也提供为管理员使用的修改股票信息的API，比如暂停股票交易等。

#### 3. 股票交易

账户系统提供股票交易的API，接收用户，股数，股票代码，并在数据库进行相关操作进行交易并返回交易结果。

#### 4. 管理员操作

账户系统的管理员可以删除、冻结普通用户，修改股票信息，暂停股票交易。

#### 5. 管理员界面

管理员进行上述管理操作的前端界面

### 8.2 性能需求

* 1. 界面设计应简洁直观，布局合理清晰地呈现信息突出重点内容。

* 2. 操作方便，用户容易上手。

* 3. 系统具有良 好的反应速度，给用户系统具有良 好的反应速度，给用户好的使用体验。我们要求在良网络情况下，系 好的使用体验。我们要求在良网络情况下，系 好的使用体验。我们要求在良网络情况下，系统应具有以下时间特性要求：
    * 单个用户在线
        * 1.客户端加载时间小于3s
        * 2.股票信息加载时间小于3s
        * 3.交易确认时间小于3s
        * 4.客户端响应用户操作时间小于0.5s
    * 100个用户同时在线
        * 1.客户端加载时间小于5s
        * 2.股票信息加载时间小于5s
        * 3.交易确认时间小于5s
        * 4.客户端响应用户操作时间小于0.5s

### 8.3 安全性需求

#### 1.保密性
认证：通过用户名、密码，防止外部人员获得保数据。

#### 2.完整性
* 1. 防止非法用户对数据进行无意或恶的 修改、插入删除，防止数据丢失。
* 2. 防止内部用户对数据进行无意或恶的修改、插入删除，丢失。
* 3. 为数据库加上一定的约束，对关键性操作如删除、修改进行限制并用户警示。
* 4. 定期备份数据。

### 8.4 可维护性需求
作为一个成熟的系统，在开发初期就应该充分考虑可维护性。对此我们提出以下几点要求：
#### 1、高内聚、低耦合的系统模块划分
开发者需要充分考虑模块内部结构的紧密型及间联系独立性。
#### 2、完备、清晰可读的文档
设计系统时应准备好各类相关文档，方便操作人员的对 功能快速查阅及维护设计系统时应准备好各类相关文档，方便操作人员的对 功能快速查阅及维护架构的系统掌握。

交付时应文档齐全，说明详尽符合相关标准。
#### 3、良好的编程风格
程序内部应有详细的注释和统一编格式，结构清晰、明确使调试测人员能快速定位各种错误。
#### 4、严谨的单元测试
对核心模块应编写单元测试，在交互时保证各子和系统整体的正常运作。